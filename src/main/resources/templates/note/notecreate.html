<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="layouts/layout.html">

<head>
	<title th:text="#{note.create}">Create Note</title>
</head>
<div layout:fragment="content">
	<div class="content-header with-border">
		<h1 th:text="#{note.create}">Create Note</h1>
	</div>
	<div class="content px-2">
		<form data-toggle="validator" role="form" th:object="${note}" th:action="@{/notes/create}" method="POST">
			<div class="card">
				<div class="card-body">
					<p style="color: red;" th:text="${errorMessage}"></p>
					<div class="form-group">
						<label for="title" th:text="#{note.title}">Title</label>
						<input type="text" name="title" required class="form-control" th:field="*{title}" id="title" />
					</div>
					<div class="form-group">
						<label for="content" th:text="#{note.content}">content</label>
						<ul class="nav nav-tabs" id="content-tab" role="tablist">
							<li class="nav-item">
								<a class="nav-link active" id="content-edit-tab" data-toggle="pill" href="#content-edit"
									role="tab" aria-controls="content-edit" aria-selected="true">Edit</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" id="content-preview-tab" data-toggle="pill" href="#content-preview"
									role="tab" aria-controls="content-preview" aria-selected="false">Preview</a>
							</li>
						</ul>
						<div class="tab-content" id="content-tab">
							<div class="tab-pane fade active show" id="content-edit" role="tabpanel"
								aria-labelledby="content-edit-tab">
								<textarea name="content" class="form-control" required rows="10" th:field="*{content}"
									id="markdown-editor"></textarea>
							</div>
							<div class="tab-pane fade" id="content-preview" role="tabpanel"
								aria-labelledby="content-preview-tab">
								<div class="form-control" id="markdown-preview"></div>
							</div>
						</div>
						<div class="form-group">
							<label for="tags" th:text="#{note.tags}">Tags</label>
							<input type="text" name="tags" class="form-control" th:field="*{tags}" id="tags" />
						</div>
					</div>
					<div class="card-footer">
						<button class="btn btn-primary" type="submit" th:text="#{button.create}"
							id="note-create">Create</button>
						<button type="button" onclick="history.back()" class="btn btn-secondary"
							th:text="#{button.cancel}">Cancel</button>
					</div>
				</div>
			</div>
		</form>
	</div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/15.0.6/marked.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
	<script th:src="@{/js/myapp.js}"></script>
	<script>
		previewMarkdown();
	</script>
</div>
<!-- /.content -->

</html>